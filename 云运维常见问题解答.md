## 云计算运维常见问题解答

### 目录
- [云服务提供商相关](#云服务提供商相关)
- [云安全相关](#云安全相关)
- [云监控与日志管理相关](#云监控与日志管理相关)
- [容器与编排相关](#容器与编排相关)

## 云计算运维常见问题解答

### 云服务提供商相关

* **AWS、Azure、GCP 各自的优势是什么？**
    * **AWS (Amazon Web Services):**
        * **市场领导者:** 拥有最广泛和最深入的服务组合，市场份额最大。
        * **成熟稳定:** 运营时间长，生态系统成熟，文档和社区支持丰富。
        * **创新速度快:** 不断推出新服务和功能。
        * **广泛的全球基础设施:** 数据中心遍布全球。
    * **Azure (Microsoft Azure):**
        * **混合云优势:** 与微软现有生态（Windows Server, Active Directory, Office 365）深度集成，对企业混合云场景友好。
        * **强大的 PaaS 服务:** 在 PaaS 和企业级服务方面有优势。
        * ** .NET 开发者友好:** 对 .NET 应用提供良好的支持。
        * **广泛的企业客户基础:** 许多大型企业已经是微软客户。
    * **GCP (Google Cloud Platform):**
        * **数据分析与机器学习:** 在大数据、AI/ML 领域有很强实力（如 BigQuery, TensorFlow）。
        * **Kubernetes 领导者:** Kubernetes 起源于 Google，GKE (Google Kubernetes Engine) 是其核心优势之一。
        * **强大的全球网络:** 拥有高性能的全球私有网络。
        * **开源贡献:** 对开源社区有巨大贡献。
        * **价格竞争力:** 在某些服务上可能更具价格优势。

* **简述公有云、私有云、混合云的区别**
    * **公有云 (Public Cloud):** 由第三方云服务提供商（如 AWS, Azure, GCP）拥有和运营，通过互联网向公众或企业提供计算资源（服务器、存储、网络等）。用户按需付费，共享基础设施。**优点:** 成本效益高、弹性伸缩、无需维护硬件。**缺点:** 控制权较低、可能存在安全和合规担忧。
    * **私有云 (Private Cloud):** 由单个组织独占使用和运营的云基础设施，可以部署在组织自己的数据中心或由第三方托管。**优点:** 更高的控制权、安全性和定制化。**缺点:** 成本高、需要自行管理和维护、弹性受限。
    * **混合云 (Hybrid Cloud):** 结合了公有云和私有云，通过技术手段使数据和应用程序能够在两者之间共享。组织可以将敏感数据保留在私有云，同时利用公有云的弹性和成本效益。**优点:** 灵活性、兼顾安全与成本。**缺点:** 管理复杂性高。

### 云安全相关

* **如何保障云环境的安全？**
    * **身份与访问管理 (IAM):** 实施最小权限原则，精细控制用户和服务的访问权限，使用多因素认证 (MFA)。
    * **网络安全:** 配置虚拟网络（VPC/VNet）、子网、安全组/网络安全组 (NSG) 和防火墙规则，限制不必要的端口和流量访问。使用 VPN 或专线连接保障传输安全。
    * **数据安全:** 对静态数据（存储卷、数据库）和传输中的数据进行加密。管理好密钥（KMS）。实施数据备份和恢复策略。
    * **安全监控与审计:** 使用云平台提供的监控服务（如 CloudWatch, Azure Monitor, Cloud Logging/Monitoring）和安全服务（如 GuardDuty, Security Center, Security Command Center）持续监控资源和检测威胁。启用审计日志，定期审查。
    * **漏洞管理:** 定期扫描虚拟机、容器镜像和应用程序代码中的漏洞，并及时修复。
    * **合规性:** 确保云环境配置符合相关的行业法规和标准（如 GDPR, HIPAA, PCI DSS）。
    * **纵深防御:** 采用多层安全措施，即使一层被突破，其他层仍能提供保护。

* **什么是 DDoS 攻击，如何在云环境中防范？**
    * **DDoS (Distributed Denial-of-Service) 攻击:** 分布式拒绝服务攻击。攻击者利用大量受控的计算机（僵尸网络）向目标服务器或网络发送海量无效或高负载的请求，耗尽目标的带宽、处理能力或连接数等资源，导致正常用户无法访问。
    * **云环境防范措施:**
        * **使用云服务商的 DDoS 防护服务:** 如 AWS Shield, Azure DDoS Protection, Google Cloud Armor。这些服务通常能自动检测和缓解大规模的 L3/L4 层攻击。
        * **Web 应用程序防火墙 (WAF):** 防御 L7 层攻击（如 HTTP Flood），过滤恶意请求。
        * **内容分发网络 (CDN):** 将内容缓存到全球边缘节点，分散流量，隐藏源站 IP，吸收部分攻击流量。
        * **弹性伸缩 (Auto Scaling):** 配置自动扩容，以便在流量激增时增加资源来处理合法请求，提高系统韧性。
        * **网络访问控制:** 配置严格的安全组/NSG/防火墙规则，仅允许必要的端口和协议。
        * **流量清洗/限速:** 在网络边缘或负载均衡器上配置流量限制和速率控制策略。
        * **Anycast 网络:** 将流量路由到最近的可用数据中心，分散攻击流量。

### 云监控与日志管理相关

* **云环境中常用的监控指标有哪些？**
    * **基础设施层面:**
        * **CPU 使用率:** 衡量计算资源繁忙程度。
        * **内存使用率:** 监控内存消耗情况。
        * **磁盘 I/O:** 磁盘读写速率和延迟。
        * **磁盘空间使用率:** 监控存储空间。
        * **网络流入/流出:** 网络带宽使用情况。
        * **网络延迟/丢包率:** 网络连接质量。
    * **应用层面:**
        * **请求延迟/响应时间:** 应用处理请求的速度。
        * **请求速率 (QPS/RPS):** 应用每秒处理的请求数。
        * **错误率:** 应用处理请求失败的比例（如 HTTP 5xx 错误）。
        * **应用内部指标:** JVM 堆内存、线程数、数据库连接池状态、队列长度等特定于应用或中间件的指标。
    * **业务层面:**
        * **用户活跃数、交易量、转化率** 等反映业务健康状况的指标。

* **简述日志管理的重要性及云环境中常用的日志管理工具**
    * **重要性:**
        * **故障排查与诊断:** 通过日志快速定位系统或应用问题的根源。
        * **安全审计与分析:** 记录用户操作、系统事件和安全事件，用于合规性检查和安全事件追溯。
        * **性能分析:** 分析请求链路、识别性能瓶颈。
        * **业务洞察:** 从日志中提取有价值的业务信息。
        * **监控与告警:** 基于日志内容设置告警规则，及时发现异常。
    * **常用工具:**
        * **云平台原生服务:**
            * **AWS:** CloudWatch Logs (收集、监控、存储), OpenSearch Service (原 Elasticsearch Service, 用于分析和可视化)
            * **Azure:** Azure Monitor Logs (Log Analytics)
            * **GCP:** Cloud Logging, Cloud Monitoring
        * **开源方案:**
            * **ELK/EFK Stack:** Elasticsearch (存储、搜索), Logstash/Fluentd (收集、处理), Kibana (可视化)。非常流行和强大的组合。
        * **商业软件:**
            * **Splunk:** 功能强大的商业日志管理和分析平台。
            * **Datadog, Dynatrace:** 提供包括日志管理在内的全栈可观测性平台。

### 容器与编排相关

* **简述 Kubernetes 的核心组件**
    * **控制平面组件 (Control Plane Components):** 通常运行在 Master 节点上。
        * **kube-apiserver:** Kubernetes API 的入口，处理 REST 请求，验证并配置数据到 etcd。是集群交互的核心。
        * **etcd:** 高可用的键值存储系统，存储 Kubernetes 集群的所有配置数据和状态。是集群的“大脑”。
        * **kube-scheduler:** 监视新创建的、未指定运行节点的 Pod，并根据资源需求、策略限制、亲和性等规则选择一个合适的 Node 来运行它。
        * **kube-controller-manager:** 运行多个控制器进程（如 Node Controller, Replication Controller, Endpoint Controller, Service Account & Token Controller 等）。这些控制器负责监控集群状态，并努力将当前状态调整到期望状态。
        * **cloud-controller-manager (可选):** 与底层云平台交互的控制器（如管理云平台的负载均衡器、存储卷等）。将云平台相关的逻辑与核心 Kubernetes 代码解耦。
    * **节点组件 (Node Components):** 运行在每个 Worker 节点上。
        * **kubelet:** 在每个 Node 上运行的主要代理，负责与 Master 节点通信，接收 PodSpec (Pod 的期望状态描述)，并确保 Pod 中的容器按照 PodSpec 运行。管理 Pod 的生命周期。
        * **kube-proxy:** 在每个 Node 上运行的网络代理，维护节点上的网络规则，实现 Kubernetes Service 的概念（网络路由和负载均衡）。
        * **容器运行时 (Container Runtime):** 负责实际运行容器的软件，如 Docker, containerd, CRI-O。Kubernetes 通过 CRI (Container Runtime Interface) 与其交互。
    * **(结合实操任务)** 在本次实操任务中，我们正是利用这些 Kubernetes 核心组件（运行在 K3s 集群中），通过声明式的 YAML 文件来部署和管理我们的 "Hello World" 应用容器。

